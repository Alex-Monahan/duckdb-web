---
layout: post
title: "Fast Top N Aggregation and Filtering with DuckDB"
author: "Alex Monahan"
excerpt: "Find the top N values by group or filter to the latest N rows by group more easily with a dedicated aggregation function parameter."
---

<!-- Databases that support argmax / max_by: Snowflake, Databricks, Bigquery, StarRocks Clickhouse, Postgres (extension), Vertica,  -->
<!-- 
    TLDR: Why use it (basic what is it)
    What is arg_max / max_by
    Use cases for max_by
        Latest event of some kind
        Top N within a group
    Advanced usage
        Top N
        Entire struct / unnest
    Example of the old way and the new way
        Include benchmarks
    Why is it faster? / architecture
    Example that is large enough to force spilling to disk (or lower the memory limit to make a point)
        If I lower the memory limit I can measure how low it can go, as well as compare performance
    
    Conclusion

 -->


 <!-- 


 
  -->